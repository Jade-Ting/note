<html>
<head>
  <title>node.js/爬虫/express……</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307425 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1485"/>
<h1>node.js/爬虫/express……</h1>

<div>
<span><div><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">node</span></h1><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">安装node环境（node官网安装维护版本）</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">npm install gulp（查看版本号：cmd---&gt;node -v）</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">写一份gulpfile.js配置gulp的参数，gulp命令执行监事来完成代码处理（压缩，重命名）</span></div></div></li></ul><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">node (introduce)</span></h2><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">Node.js是一个基于</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">Chrome V8</span><span style="box-sizing: border-box;">引擎的JavaScript运行时</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">node相当于浏览器的控制台（</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">Chrome V8</span><span style="box-sizing: border-box;">引擎）</span></div></div></li></ul><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">前端（浏览器）</span></h2><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">要运行JS，必须借助于HTML文件，没有HTML文件和浏览器环境的话，JS是无法运行的。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">要有HTML文件，也必须要有浏览器环境。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">浏览器=界面+控制台</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">此时JS是必须运行在浏览器上，所以只能控制浏览器</span></div></div></li></ul><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">后端（服务器端）</span></h2><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">要运行JS，既不需要HTML文件，也不需要浏览器环境，只需要Node环境，node替代了HTML文件，也替代了浏览器</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">服务器（node）=控制台</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">JS有了node环境，可以运行在非浏览器环境下，因为node是装在系统上，所以JS可以操作系统</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">node（浏览器的控制台===Chrome的V8引擎）</span></div></div></li></ul><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">运行JS</span></h2><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">写一份JS代码</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在该文件夹中打开cmd控制台，或在cmd中定位到该文件的位置</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在命令行运行命令</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">node JS文件的名字.js</span></div></div></li></ul><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">模块化</span></h1><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">自定义模块化</span></h2><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">前端</span></h3><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">写多条</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">&lt;script&gt;引入js</span><span style="box-sizing: border-box;">在html中分开引入</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">src</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;jquery，js&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">src</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;cookie.js&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">node（后端）</span></h3><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">没有html，所以需要借助两个JS方法</span></div></div></li><ul style="box-sizing: border-box; margin: 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">导出借助于</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">module.exports = {(fn),(fn)}</span></div></div></li></ul><li lang="js" style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; width: inherit; position: relative !important;"><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">plus</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">a</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">b</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">a</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">b</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">sub</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">a</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">b</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">a</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">-</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">b</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">module</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">exports</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">plus</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">sub</span></div><div><span style="box-sizing: border-box;">}</span></div></li><ul style="box-sizing: border-box; margin: 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">导入，借助于</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">require</span><span style="box-sizing: border-box;">,建议使用相对路径</span></div></div></li></ul><li lang="js" style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; width: inherit; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">tool</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;./plus.js&quot;</span><span style="box-sizing: border-box;">);</span></div></li><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">内置模块</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">node环境自带，可以直接引入。具体参考</span> <a href="https://nodejs.org/dist/latest-v8.x/docs/api/" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">node官网内置模块API文档</a></div></blockquote><ul style="box-sizing: border-box; margin: 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">Node作为PHP的一种替代（多一种可选方案），PHP能做的，Node也能做。</span></div></div></li></ul></ul><table style="box-sizing: border-box; border-spacing: 0px; text-align: left; overflow: auto; break-inside: auto; white-space: pre-wrap; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 400px;"></col><col style="width: 400px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 430px; min-height: 10px;">模块</span></div></td><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 315px; min-height: 10px;">名字</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 430px; min-height: 10px;">读写文件</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 315px; min-height: 10px;">fs</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px; background-color: rgb(248, 248, 248);"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 430px; min-height: 10px;">创建服务器</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 315px; min-height: 10px;">http</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 430px; min-height: 10px;">查看系统</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 315px; min-height: 10px;">os</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px; background-color: rgb(248, 248, 248);"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 430px; min-height: 10px;">压缩文件</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 315px; min-height: 10px;">zip</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 430px; min-height: 10px;">...</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 315px; min-height: 10px;">...</span></div></td></tr></tbody></table><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">HTTP-超文本传输协议</span></h1><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">前端最多的就是ajax（http协议的一种前端实现方案）</span></div></blockquote><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">GET/POST区别</span></h4><table style="box-sizing: border-box; border-spacing: 0px; text-align: left; overflow: auto; break-inside: auto; white-space: pre-wrap; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 400px;"></col><col style="width: 400px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 372px; min-height: 10px;">GET</span></div></td><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 373px; min-height: 10px;">POST</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 372px; min-height: 10px;">参数在url上</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 373px; min-height: 10px;">参数在请求体</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px; background-color: rgb(248, 248, 248);"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 372px; min-height: 10px;">有可能有长度</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 373px; min-height: 10px;">没长度限制</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 372px; min-height: 10px;">不安全</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 373px; min-height: 10px;">安全</span></div></td></tr></tbody></table><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">status（状态码）</span></h4><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">状态码 1xx 开始执行 2xx 成功 3xx 重定向 4xx 客户端错误,浏览器端 5xx 服务端</span></div><table style="box-sizing: border-box; border-spacing: 0px; text-align: left; overflow: auto; break-inside: auto; white-space: pre-wrap; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 400px;"></col><col style="width: 400px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 101px; min-height: 10px;">状态码</span></div></td><td style="width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 101px; min-height: 10px;">1xx</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 644px; min-height: 10px;">开始执行</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px; background-color: rgb(248, 248, 248);"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 101px; min-height: 10px;">2xx</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 644px; min-height: 10px;">成功（从服务器请求）</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 101px; min-height: 10px;">3xx</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 644px; min-height: 10px;">重定向（从浏览器之前缓存的数据中请求）----也是成功</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px; background-color: rgb(248, 248, 248);"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 101px; min-height: 10px;">4xx</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 644px; min-height: 10px;">客户端错误（浏览器端）---前端</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 101px; min-height: 10px;">5xx</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 644px; min-height: 10px;">服务端错误（后端）</span></div></td></tr></tbody></table><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">wamp 集成环境</span></h3><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box;">window</span></div><div><span style="box-sizing: border-box;">Apache</span></div><div><span style="box-sizing: border-box;">MySQL</span></div><div><span style="box-sizing: border-box;">PHP</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">创建服务器</span></h3><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">http</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'http'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 该querystring模块提供用于解析和格式化URL查询字符串的实用程序。</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">querystring</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'querystring'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">url</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'url'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">fs</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'fs'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">server</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">http</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">createServer</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">request</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">response</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(request);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 打印request,即得知从前端请求得到什么。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 可知，前端输入的userna：123 passwor：123。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 此时打印台出现的为一个对象，其中url：'/?username=123&amp;password=123'</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 因此我们现在要获取到这个url</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">request</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">url</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// cmd-------&gt; /?username=123$password=123</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(url.parse(request.url));</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// cmd-------&gt; search:'?usename=123$password=123'</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// query:'usename=123$password=123'</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">query</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">url</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">parse</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">request</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">url</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">query</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 用querystring.parse方法将query解析成对象</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">param</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">querystring</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">parse</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">query</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">param</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// cmd--------&gt;{username:'123',password:'123'}</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 为隐式标头设置单个标头值。</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">response</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">setHeader</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Access-Control-Allow-Origin&quot;</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;*&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 在添加了响应头后，，浏览器控制台---network----Heaher可以看到---Response Heahers</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">response</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">end</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;hello world&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// response.end()此方法向服务器发出信号，表明已发送所有响应标头和正文; 该服务器应该考虑此消息完成。必须在每个响应上调用该方法</span></div><div><br/></div><div><span style="box-sizing: border-box;">});</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// sever.listen(写端口名，范围：0-65535)</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">server</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">listen</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">8888</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// -----------&gt;在浏览器中localhost：8888，页面呈现：hello world</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;启动服务器&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// -----------&gt; cmd ------&gt;启动服务器</span></div><div><br/></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 修改代码后再在控制台启动一下。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 可以先 ctrl+C 再运行一次命令</span></div></div><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">出现跨域，加一个头部解决</span></h4><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">header</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Access-Control-Allow-Origin:*&quot;</span><span style="box-sizing: border-box;">)</span></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">第三方模块</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">可以从</span><a href="https://www.npmjs.com/" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">npm</a><span style="box-sizing: border-box;">包管理中心下载第三方包，在本地node平台实现自己的一些功能。（gulp就是一个常用的第三方模块）</span></div></blockquote><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">安装</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">建议在根目录下安装</span></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">install xxx(gulp)</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">-g</span><span style="box-sizing: border-box;">//-g表示全局安装</span></div><div><span style="box-sizing: border-box;">或者</span> <span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">i</span></div><div><br/></div><div><span style="box-sizing: border-box;">添加包时，输入：</span></div><div><span style="box-sizing: border-box;">cnpm install cheerio</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">--save-dev</span></div><div><span style="box-sizing: border-box;">（表示把该模块保存在package.json里的devDependencies里面）</span></div></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">建议安装cnpm替代npm，在命令行上输入：</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">install</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">-g</span> <span style="box-sizing: border-box;">cnpm</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">--</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 255);">registry</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span><span style="box-sizing: border-box;"><a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">除了全局安装之外，安装任何包都会被安装在该目录下</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">node_modules</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">【注意】该文件夹不要传到svn和git服务器上，当移植这个项目的时候只要用</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">package.json</span><span style="box-sizing: border-box;">描述文件去代替</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">node_modules</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">这份文件记录着你开发node的一些关键信息，比如你安装过什么模块作为依赖（可在package.json中查看）</span></div></div></li></ul><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">卸载</span></h3><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">uninstall xxx //卸载某个模块</span></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">uninstall //全部卸载</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">初始化</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">生成一份</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">package.json</span><span style="box-sizing: border-box;">描述文件</span></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">init</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">使用第三方模块</span></h3><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">request</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'request'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">gulp</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'gulp'</span><span style="box-sizing: border-box;">);</span></div></div><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">node.js参考教程</span></h1><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://www.runoob.com/nodejs/nodejs-tutorial.html" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">runoob菜鸟教程</a></div></blockquote><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">异步</span></h2><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">前端（浏览器端）</span></h3><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">前端异步只有以下几种情况</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box;">ajax xmlhttprequest</span></div><div><span style="box-sizing: border-box;">setInterval/setTimeout</span></div><div><span style="box-sizing: border-box;">jsonp</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">后端（服务器端node）</span></h3><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">后端异步比前端多很多，很多方法都是异步，可以参考</span> <a href="https://nodejs.org/dist/latest-v8.x/docs/api/" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">node官网内置模块API文档</a><span style="box-sizing: border-box;">，其中有待Sync的为同步。如：</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">fs</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">readFile</span> <span style="box-sizing: border-box; color: rgb(170, 85, 0);">//异步</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">fs</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">readFileSync</span> <span style="box-sizing: border-box; color: rgb(170, 85, 0);">//同步</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">异步一般配合回调函数</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">异步非阻塞，相对不稳定，配合回调函数才有意义</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">同步没有回调函数；</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">同步阻塞，相对稳定，不需要回调函数；</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//同步</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">data</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">fs</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">readFileSync</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./test.txt'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">data</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">toString</span><span style="box-sizing: border-box;">());</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//异步</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">fs</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">readFile</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./test.txt'</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">err</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">data2</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data2</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">toString</span><span style="box-sizing: border-box;">());</span></div><div><span style="box-sizing: border-box;">});</span></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">回调嵌套</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 0px; margin-bottom: 0px; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">用promise解决</span></h4></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//回调嵌套金字塔（后期维护起来特别麻烦）</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// setTimeout(()=&gt;{</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(&quot;买披萨&quot;);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// setTimeout(()=&gt;{</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(&quot;喝水&quot;);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// setTimeout(()=&gt;{</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(&quot;玩手机&quot;);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// }), 1000)</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// }, 1000)</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// }, 1000)</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//利用promise解决这个问题</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">buyPizza</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">((</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">)</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">setTimeout</span><span style="box-sizing: border-box;">(()</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;买披萨&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">},</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">1000</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">drink</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">((</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">)</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">setTimeout</span><span style="box-sizing: border-box;">(()</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;喝水&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">},</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">1000</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">eat</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">((</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">)</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">setTimeout</span><span style="box-sizing: border-box;">(()</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;吃&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">},</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">1000</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 使操作步骤按以下顺序执行</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">buyPizza</span><span style="box-sizing: border-box;">().</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">drink</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">eat</span><span style="box-sizing: border-box;">);</span></div><div><br/></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 如果使用Promise.resolve()启动Promise，则在需要传递的参数前面加return即可。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 如果是利用Promise包装了任务，则把想要传递给下一个task的参数传入resolve()即可。</span></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">Promise</span></h2><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">基本用法</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">以下来自于网络，仅供参考</span></div></blockquote><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">ES6规定，Promise对象是一个构造函数，用来生成Promise实例</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">promist</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">/*异步操作成功*/</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">value</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">}</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">else</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">reject</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">error</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box;">})</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">resolve</span><span style="box-sizing: border-box;">函数的作用是，将Promise对象的状态从“未完成”变为“成功”（即从</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">pending</span> <span style="box-sizing: border-box;">变为</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">resolved</span><span style="box-sizing: border-box;">），在异步操作成功时调用，并将异步操作的结果，作为参数传递出去；</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">reject</span><span style="box-sizing: border-box;">函数的作用是，将Promise对象的状态从“未完成”变为“失败”（即从</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">pending</span> <span style="box-sizing: border-box;">变为</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">rejected</span><span style="box-sizing: border-box;">），在异步操作失败时调用，并将异步操作报出的错误，作为参数传递出去。</span></div></div></li></ul><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">Promise 实例生成以后，可以用then 方法分别指定resolved状态和rejected状态的回调函数。</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">promise</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">value</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//success</span></div><div><span style="box-sizing: border-box;">},</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//failure</span></div><div><span style="box-sizing: border-box;">});</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">12345</span></div></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">例子:</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">timeout</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">ms</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">((</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">)</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">setTimeout</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">ms</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'done'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">timeout</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">100</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">((</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">value</span><span style="box-sizing: border-box;">)</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">value</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">12345678</span></div></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">let</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">promise</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'Promise'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">promise</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'resolved'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'Hi!'</span><span style="box-sizing: border-box;">);</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//Promise</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//Hi!</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//resolved123456789101112</span></div></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//异步加载图片</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">loadImageAsync</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">url</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">image</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Image</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">image</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">onload</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">image</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">};</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">image</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">onerror</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">reject</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Error</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'error'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">};</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">image</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">src</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">url</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">}</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">12345678910111213</span></div></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">下面是一个用Promise对象实现的 Ajax 操作的例子。</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">getJSON</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">url</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">promise</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">handler</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">() {</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">this</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">readyState</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">!==</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">4</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">this</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">status</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">===</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">200</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">this</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">response</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">}</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">else</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">reject</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Error</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">this</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">statusText</span><span style="box-sizing: border-box;">));</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box;">};</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">client</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">XMLHttpRequest</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">open</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;GET&quot;</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">url</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">onreadystatechange</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">handler</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">responseType</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;json&quot;</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">setRequestHeader</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Accept&quot;</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;application/json&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">();</span></div><div><br/></div><div><span style="box-sizing: border-box;">});</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">promise</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box;">};</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">getJSON</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;/posts.json&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">json</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'Contents: '</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">json</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">},</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">error</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'出错了'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">error</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">request</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">前端请求，具体参考</span><a href="https://www.npmjs.com/package/request" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">request模块文档</a></div></blockquote><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">任何前端请求都有请求头、请求体、响应头（这是三个用户不可见），响应体（用户可见）。</span></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">请求头（浏览器信息）</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">请求体（POST请求，请求参数会在这个请求体里）</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">响应头（服务器信息）</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">响应体（页面的内容，用户可见）</span></div></div></li></ul><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">爬虫</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.8em; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">爬取网站的内容，可以保存到本地，或者分析页面获取有价值的信息。</span></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">但是，并非所有网站都是能爬，有些网站是防爬虫，还有一些网页是前端JS动态生成</span></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">request</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'request'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">fs</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'fs'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">request</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="https://haiwai.ibaotu.com/">https://haiwai.ibaotu.com</a>'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">response</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">body</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Print the error if one occurred如果发生错误，请打印错误</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'error:'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">error</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Print the response status code if a response was received如果收到回复，请打印响应状态代码</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'statusCode:'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">response</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">&amp;&amp;</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">response</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">statusCode</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Print the HTML for the Google homepage.打印Google主页的HTML。</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'body:'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">body</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 将爬取到的网站信息保存到./massage.html里</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">fs</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">writeFile</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./massage.html'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">body</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'网页成功保存'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">}) ;</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;开始请求&quot;</span><span style="box-sizing: border-box;">);</span></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">cheerio</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.8em; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">实现网页内容分析，用法类似于jQuery，node版本jQuery,可以用它爬取文字，图片，音频</span></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">参考</span><a href="https://www.npmjs.com/package/cheerio" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">cheerio使用文档</a></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 爬虫酷狗音乐</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">request</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'request'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">cheerio</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'cheerio'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">fs</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'fs'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//1、首先请求到歌手页面</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">request</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="http://www.kugou.com/yy/singer/home/1574.html">http://www.kugou.com/yy/singer/home/1574.html</a>'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">response</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">body</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//console.log('body:', body); // Print the HTML for the Google homepage.</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">$</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">cheerio</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">load</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">body</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;.song_hid&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">each</span><span style="box-sizing: border-box;">((</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">i</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">e</span><span style="box-sizing: border-box;">)</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=&gt;</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log($(e).attr(&quot;value&quot;));</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">src</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">e</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">attr</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;value&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">split</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;|&quot;</span><span style="box-sizing: border-box;">)[</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">1</span><span style="box-sizing: border-box;">];</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//裁剪得到hash值</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(src);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 2、利用hash值再次请求得到歌曲信息</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">request</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash=">http://www.kugou.com/yy/index.php?r=play/getdata&amp;hash=</a>'</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">src</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">response</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">body</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(JSON.parse(body).data.play_url);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">playUrl</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">JSON</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">parse</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">body</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">data</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">play_url</span><span style="box-sizing: border-box;">;</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//得到歌曲路径</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(JSON.parse(body).data.audio_name);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">audioName</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">JSON</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">parse</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">body</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">data</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">audio_name</span><span style="box-sizing: border-box;">;</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//得到歌曲名字</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">request</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">playUrl</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">pipe</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">fs</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">createWriteStream</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./music/'</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">audioName</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'.mp3'</span><span style="box-sizing: border-box;">))</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//下载数据流到./music文件夹下</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;开始请求&quot;</span><span style="box-sizing: border-box;">);</span></div></div><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">express</span></h1><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://www.npmjs.com/package/express" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">npm的express文档</a></div></blockquote><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">切换不同的路由，会进入不同的逻辑</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">也就是浏览器输入不同的路径，页面就有不同的返回结果</span></div><div lang="js" style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; width: inherit; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">express</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'express'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">app</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">express</span><span style="box-sizing: border-box;">();</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//''路径不同，跳转的页面不同----&gt;路由</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">app</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">get</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">res</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'Hello World'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">app</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">get</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/home'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">res</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'Hello World'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">app</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">listen</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">3000</span><span style="box-sizing: border-box;">);</span></div></div></div></li></ul><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">express的脚手架</span></h1><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://www.npmjs.com/package/express" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">npm的express文档</a><span style="box-sizing: border-box;">中的</span><span style="box-sizing: border-box; font-weight: bold;">Quick Start</span></div></blockquote><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">全局安装</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">install</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">-g</span> <span style="box-sizing: border-box;">express-generator@4</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">创建应用结构</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在一个文件夹(在需要创建路由的目录中)中用</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">express</span> <span style="box-sizing: border-box;">命令创建应用架构</span></div></blockquote><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">自动创建文件</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box;">express test(test是文件名)</span></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">cd</span> <span style="box-sizing: border-box;">test(进入到test文件夹，进入下一步)</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">进入test文件夹安装其他依赖文件，</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">cd</span> <span style="box-sizing: border-box;">test</span></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">install</span></div><div><span style="box-sizing: border-box;">或者：cnpm install //建议使用cnpm安装所有依赖</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">启动应用,这样就初始化完成了一个最简单的express项目</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box;">SET</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">DEBUG</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span><span style="box-sizing: border-box;">test:* //【注意，要把test改成与自己一开始设置的文件名相同】</span></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box; color: rgb(51, 0, 170);">start</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">访问在浏览器的3000端口号</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">http</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//localhost:3000</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">创建路由</span></h3><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">进入创建的test目录下的routes文件夹，复制一份</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">user.js</span><span style="box-sizing: border-box;">到新建的</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">home.js</span><span style="box-sizing: border-box;">文件里，改变</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">/home</span><span style="box-sizing: border-box;">的路径</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">express</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'express'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">router</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">express</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">Router</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">router</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">get</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/home'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">res</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">next</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'hello world'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">module</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">exports</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">router</span><span style="box-sizing: border-box;">;</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">app.js</span><span style="box-sizing: border-box;">添加以下两条，完成该路由的创建</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">homeRouter</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./routes/home'</span><span style="box-sizing: border-box;">);</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//备注：表示当前文件夹下的routes目录下的home.js文件</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//code</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">app</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">use</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/test'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">homeRouter</span><span style="box-sizing: border-box;">);</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">访问该路径</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">http</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//localhost:3000/test/home</span></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">MySQL</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.8em; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">express的脚手架之一，用于与数据库连接</span></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://www.npmjs.com/package/mysql" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">参考文档</a></div></blockquote><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">案例：注册</span></h4><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">login.html</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">body</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">input</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;text&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;username&quot;</span> <span style="box-sizing: border-box; color: rgb(17, 119, 0);">/&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">input</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;password&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;password&quot;</span> <span style="box-sizing: border-box; color: rgb(17, 119, 0);">/&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">input</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;button&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;login&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">value</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;登录&quot;</span> <span style="box-sizing: border-box; color: rgb(17, 119, 0);">/&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">src</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;../javascripts/jquery-3.2.1.js&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;#login&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">click</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">ajax</span><span style="box-sizing: border-box;">({</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">type</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;post&quot;</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">data</span><span style="box-sizing: border-box;">:{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">username</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;#username&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">val</span><span style="box-sizing: border-box;">(),</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">password</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;#password&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">val</span><span style="box-sizing: border-box;">()</span></div><div><span style="box-sizing: border-box;">},</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">url</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;<a href="http://localhost:3000/test/login">http://localhost:3000/test/login</a>&quot;</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">async</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(34, 17, 153);">true</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">success</span><span style="box-sizing: border-box;">:</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">data</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">test.js</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">express</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'express'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">router</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">express</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">Router</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 注册,配合mysql，连接到数据库，查看账号是否已经被注册</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">router</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">post</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/register'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">res</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">next</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(req.body);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">mysql</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'mysql'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">connection</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">mysql</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">createConnection</span><span style="box-sizing: border-box;">({</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">host</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'localhost'</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">user</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'root'</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">password</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">''</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">database</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'user'</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//数据库表格名称</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">connection</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">connect</span><span style="box-sizing: border-box;">();</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//连接数据库</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 判断用户输入的注册账号是否已经存在于数据库中，即是否已经被注册，若存在，则该注册名不可用，若不存在则将该注册名存入数据库中</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 使用mysql的连接查询方法connection.query</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// connection.query方法中存在回调函数,所以是异步，用promise解决</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// select * from userdata where ? [{username : req.body.username;}] 表示查看userdata表中的所有数据是否等于req.body.username,若相等，表示已经数据库中存在，则不能使用</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">isExistSameName</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">connection</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">query</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'select * from userdata where ? '</span><span style="box-sizing: border-box;">,[{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">username</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">req</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">body</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">username</span></div><div><span style="box-sizing: border-box;">}],</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">results</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">fields</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">error</span><span style="box-sizing: border-box;">)</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">throw</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">error</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">results</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">results</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">length</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">&gt;</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">0</span><span style="box-sizing: border-box;">){</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//lts.length &gt; 0 表示username有值</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">connection</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">end</span><span style="box-sizing: border-box;">();</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//断开连接</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'register failed'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">}</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">else</span><span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">resolve</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 若用户名未被注册过，则将该用户名插入到数据库中</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">isInsertUser</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">return</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Promise</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">resolve</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">reject</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">connection</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">query</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'INSERT INTO userdata SET ?'</span><span style="box-sizing: border-box;">,[{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">username</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">req</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">body</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">username</span><span style="box-sizing: border-box;">,</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">password</span> <span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">req</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">body</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">password</span></div><div><span style="box-sizing: border-box;">}],</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">error</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">results</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">fields</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">error</span><span style="box-sizing: border-box;">)</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">throw</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">error</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'register success'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">connection</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">end</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">isExistSameName</span><span style="box-sizing: border-box;">().</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">then</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">isInsertUser</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">module</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">exports</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">router</span><span style="box-sizing: border-box;">;</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">app.js</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">loginRouter</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./routes/test'</span><span style="box-sizing: border-box;">);</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//备注：表示当前文件夹下的routes目录下的test.js文件</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">app</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">use</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/test'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">loginRouter</span><span style="box-sizing: border-box;">);</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">数据操作（参考）</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">来源于二阶段php结合mysql中的数据增删改查操作</span></div></blockquote><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">插入数据</span></div><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">格式：</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">insert into &lt;表名&gt; [(&lt;字段名1&gt;[,..&lt;字段名n &gt; ])] values ( 值1 )[, (值n )];</span></div></blockquote></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//单条数据</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">insert</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">into</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">MyGuests</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">firstname</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">lastname</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">email</span><span style="box-sizing: border-box;">)</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">values</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'John'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'Doe'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="mailto:john@example.com">john@example.com</a>'</span><span style="box-sizing: border-box;">)</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">删除表数据</span></div><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">格式：delete from 表名 where 表达式</span></div></blockquote></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//删除MyGuests表中id为1的数据</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">DELETE</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">FROM</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">MyGuests</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">where</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">id</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">1</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//删除所有数据</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">DELETE</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">FROM</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">MyGuests</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">查询表中的数据</span></div><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">格式： select &lt;字段1, 字段2, …&gt; from &lt; 表名 &gt; where &lt; 表达式 &gt;;</span></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.5rem 0px 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">select一般配合where使用，以查询更精确更复杂的数据。</span></div></blockquote></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: pre-wrap; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div>//查看表 MyGuests 中所有数据</div><div>select * from MyGuests;</div><div><br/></div><div>//查看表 MyGuests 中前10行数据：</div><div>select * from MyGuests order by id limit 0,10;</div><div><br/></div><div><br/></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">修改表中的数据。</span></div><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">格式：update 表名 set 字段=新值,… where 条件;</span></div></blockquote></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: pre-wrap; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div>update MyGuests set name='Mary' where id=1;</div><div><br/></div><div><br/></div></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">multer</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://github.com/expressjs/multer/blob/master/doc/README-zh-cn.md" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">参考文档</a></div></blockquote><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">express的脚手架之一。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">Multer 是一个 node.js 中间件，用于处理</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">multipart/form-data</span> <span style="box-sizing: border-box;">类型的表单数据，它主要用于上传文件。它是写在</span> <a href="https://github.com/mscdex/busboy" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">busboy</a> <span style="box-sizing: border-box;">之上非常高效。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">注意</span><span style="box-sizing: border-box;">: Multer 不会处理任何非</span> <span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">multipart/form-data</span> <span style="box-sizing: border-box;">类型的表单数据。</span></div></div></li></ul><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">上传文件案例</span></h3><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">input</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;file&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;files&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">name</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;uploadFile&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">multiple</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">/&gt;</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;text/javascript&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">filesNode</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">document</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">getElementById</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;files&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// onchange 事件：当你改变输入框内容，离开输入框后，函数将被触发，</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// onchange 事件会在域的内容改变时发生。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// onchange 事件也可用于单选框与复选框改变后触发的事件。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// onchange 属性可以使用于： &lt;input&gt;, &lt;select&gt;, 和 &lt;textarea&gt;。</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">filesNode</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">onchange</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(filesNode.flies);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">xhr</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">XMLHttpRequest</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">xhr</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">onreadystatechange</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">if</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">xhr</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">readyState</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">==</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">4</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">&amp;&amp;</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">xhr</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">status</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">==</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">200</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">xhr</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">responseText</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">data</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">new</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">FormData</span><span style="box-sizing: border-box;">();</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//创建一个空对象实例，可以用append()方法添加数据</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">append</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;uploadFile&quot;</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">filesNode</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">files</span><span style="box-sizing: border-box;">[</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">0</span><span style="box-sizing: border-box;">]);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">xhr</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">open</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;post&quot;</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;<a href="http://localhost:3000/upload/uploads">http://localhost:3000/upload/uploads</a>&quot;</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(34, 17, 153);">true</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">xhr</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">filesNode</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">value</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(34, 17, 153);">null</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 【注意】以上中data.append(&quot;uploadFile&quot;,filesNode.files[0]);中uploadFile为input标签的name属性值，</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 实现上传文件</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">express</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'express'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">router</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">express</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">Router</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">db</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'../lib/db.js'</span><span style="box-sizing: border-box;">);</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 实现上传必须配置的参数</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">multer</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'multer'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 磁盘存储引擎DiskStorage可以让你控制文件的存储。</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">storage</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">multer</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">diskStorage</span><span style="box-sizing: border-box;">({</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// destination 是用来确定上传的文件应该存储在哪个文件夹中。</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">destination</span><span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">file</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">cb</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">cb</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(34, 17, 153);">null</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'public/my-uploads'</span><span style="box-sizing: border-box;">);</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//选择储存的文件夹位置，建议先建好文件夹，否则会出现'500'报错</span></div><div><span style="box-sizing: border-box;">},</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// filename 给上传的文件重命名。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 如果没有设置 filename，每个文件将设置为一个随机文件名，并且是没有扩展名的</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 注意: Multer 不会为你添加任何扩展名，但程序应该返回一个完整的文件名。</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 因此，可以把 abc.jpg图片切割为数组[abc,jpg],然后用数组长度-1来获取后缀名</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 并且可以给图片加上时间戳格式防止重名名</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">filename</span><span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">file</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">cb</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">fileFormat</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">file</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">originalname</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">split</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'.'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">cb</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(34, 17, 153);">null</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">file</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">fieldname</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'-'</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">Date</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">now</span><span style="box-sizing: border-box;">()</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'.'</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">+</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">fileFormat</span><span style="box-sizing: border-box;">[</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">fileFormat</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">length</span><span style="box-sizing: border-box; color: rgb(152, 26, 26);">-</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">1</span><span style="box-sizing: border-box;">]);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// console.log(fileFormat[fileFormat.length-1]);</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">upload</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">multer</span><span style="box-sizing: border-box;">({</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">storage</span><span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">storage</span> <span style="box-sizing: border-box;">});</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// .single(fieldname):接受一个以 fieldname（input标签的name属性值） 命名的文件。这个文件的信息保存在 req.file。</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">router</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">post</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'/uploads'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">upload</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">single</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'uploadFile'</span><span style="box-sizing: border-box;">),</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">res</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">next</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">next</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">},</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">req</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">res</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">next</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'upload success'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">module</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">exports</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">router</span><span style="box-sizing: border-box;">;</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">FormData()方法（参考）</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">参考文档自行百度</span></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box;">//通过FormData构造函数创建一个空对象</span></div><div><span style="box-sizing: border-box;">var formdata = new FormData();</span></div><div><span style="box-sizing: border-box;">//可以通过append()方法来追加数据</span></div><div><span style="box-sizing: border-box;">formdata.append(&quot;name&quot;,&quot;laotie&quot;);---------------------&gt;name为input标签的name属性值</span></div><div><span style="box-sizing: border-box;">//通过get方法对值进行读取</span></div><div><span style="box-sizing: border-box;">console.log(formdata.get(&quot;name&quot;));//laotie</span></div><div><span style="box-sizing: border-box;">//通过set方法对值进行设置</span></div><div><span style="box-sizing: border-box;">formdata.set(&quot;name&quot;,&quot;laoliu&quot;);</span></div><div><span style="box-sizing: border-box;">console.log(formdata.get(&quot;name&quot;));//laoliu</span></div></div><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">MongoDB</span></h1><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.8em; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">nosql数据库，不需要sql语句的数据库，里面一切都是类似于JSON文件</span></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://www.npmjs.com/package/mongodb" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">参考文档</a></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://github.com/Wscats/node-tutorial/issues/20" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">mongodb教程</a></div></blockquote><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在高负载的情况下，添加更多的节点，可以保证服务器性能。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</span></div></div></li></ul><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">安装</span></h2><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">双击安装</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">mongodb.msi</span><span style="box-sizing: border-box;">文件</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">找回安装完</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">mongodb</span><span style="box-sizing: border-box;">文件夹</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">bin</span><span style="box-sizing: border-box;">的路径</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: pre-wrap; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div>C:\Program Files\MongoDB\Server\3.2\bin</div><div><br/></div><div><br/></div></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">里面有多个exe文件</span></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">bin</span><span style="box-sizing: border-box;">这个目录下，打开</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">cmd</span><span style="box-sizing: border-box;">命令行，执行以下命令，输入的文件夹路径中若有数据库则连接此数据库，该目录中若没有数据库则执行该命令就是创建数据库成功。</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box;">mongod</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">--dbpath</span> <span style="box-sizing: border-box;">[文件夹的路径](创建的数据的路径)</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">安装</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">robo3t</span><span style="box-sizing: border-box;">的可视化软件来管理</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">mongodb</span><span style="box-sizing: border-box;">数据库，没有表的概念，只有集合(类似于mysql的表))</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">配合node来使用</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">mongodb</span><span style="box-sizing: border-box;">数据库,在项目目录下用cmd安装</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(51, 0, 170);">npm</span> <span style="box-sizing: border-box;">install mongodb</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">新建</span><span style="box-sizing: border-box; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">server.js</span><span style="box-sizing: border-box;">,执行以下代码</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">MongoClient</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'mongodb'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">MongoClient</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">assert</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'assert'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Connection URL</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">url</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="mongodb://localhost:27017/">mongodb://localhost:27017</a>'</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Database Name</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">dbName</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'1806'</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Use connect method to connect to the server</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">MongoClient</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">connect</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">url</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">err</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">client</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">assert</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">equal</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(34, 17, 153);">null</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">err</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Connected successfully to server&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">db</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">db</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">dbName</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">close</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">});</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">查看数据</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">MongoClient</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'mongodb'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">MongoClient</span><span style="box-sizing: border-box;">;</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">assert</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'assert'</span><span style="box-sizing: border-box;">);</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Connection URL</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">url</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="mongodb://localhost:27017/">mongodb://localhost:27017</a>'</span><span style="box-sizing: border-box;">;</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Database Name</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">dbName</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(170, 17, 17);">'1806'</span><span style="box-sizing: border-box;">;</span></div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// Use connect method to connect to the server</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">MongoClient</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">connect</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">url</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">err</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">client</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">assert</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">equal</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(34, 17, 153);">null</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">err</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Connected successfully to server&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//选择库</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">const</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">db</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">db</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">dbName</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//选择集合（表）</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">db</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">collection</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'students'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">find</span><span style="box-sizing: border-box;">({</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//find里的数据若为空，则会查找到所有数据，若有条件，则会找到条件对应的数据</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">age</span><span style="box-sizing: border-box;">:</span> <span style="box-sizing: border-box; color: rgb(17, 102, 68);">18</span></div><div><span style="box-sizing: border-box;">}).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">toArray</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">err</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">docs</span><span style="box-sizing: border-box;">) {</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//toArray转成数组</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">assert</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">equal</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">err</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(34, 17, 153);">null</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Found the following records&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">docs</span><span style="box-sizing: border-box;">);</span><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//docs为结果</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">client</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">close</span><span style="box-sizing: border-box;">();</span></div><div><span style="box-sizing: border-box;">});</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">robo3t（mongodb可视化操作工具）</span></h3><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">操作步骤（参考）：</span></div><ol style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">先要在电脑启动mongoDB，然后打开Robo 3T ，点击“create”创建一个到mongoDB的连接。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">接着在mongoDB启动的情况下，点击connect，Robo 3T 即可连接到mongoDB了。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在Robo 3T 左上方，可以看到mongoDB里面的数据库了，这就是可视化了。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在连接上面单击右键，有一个“open shell”，它是用来执行mongoDB中的命令或者语句的。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">此外，你还可以点击Create Database直接新建一个mongoDB的数据库。</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">也可以点击Repair Database或Drop Database在数据库上面新建集合</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">点击Create connection 创建集合（也就是表）</span></div></div></li></ol><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">express配合mongodb实现系统的接口</span></h2><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">案例：后台系统增加查找数据</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">具体查看 C:\Users\Administrator\Desktop\third\05.day5\cms（Content Management System）</span></div></blockquote><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">报错：db.collection is not a function</span></h3><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">【注意】在mongodb中db.query返回的是一个函数，所以应该写成：</span></div><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">db</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">query</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">db</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//mongodb中插入数据的操作</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">db</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">collection</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'cmsData'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">insertMany</span><span style="box-sizing: border-box;">([</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">req</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">body</span><span style="box-sizing: border-box;">],</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">err</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">result</span><span style="box-sizing: border-box;">) {</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;Inserted 1 documents into the collection&quot;</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 插入完成后才响应</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">res</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">send</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'respond with a resource'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box;">})</span></div></div><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; font-weight: bold; line-height: 1.2; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">websocket</span></h1><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px; position: relative;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">WebSocket提供了一个受欢迎的技术，来替代Ajax技术 。HTML5的WebSocket API，它可用于客户端、服务器端。而且有一个优秀的第三方API，名为</span><span style="box-sizing: border-box; font-weight: bold;">Socket.IO</span> <span style="box-sizing: border-box;">,这个新的API提供了一个方法，从客户端使用简单的语法有效地推动消息到服务器。</span></div><div style="box-sizing: border-box;"><hr style="box-sizing: content-box; border: 0px none; height: 2px; margin: 16px 0px; padding: 0px; background-color: rgb(231, 231, 231); overflow: hidden;"/></div><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">ajax</span></h4><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">前端主动发，后端被动接收（req，res）</span></div></div></li></ul><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">websocket（作用更广）</span></h4><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">前端主动发，后端被动接收</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">后端主动发，前端被动接收</span></div></div></li></ul><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">安装</span> <span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; font-weight: bold; line-height: 1.4; cursor: text; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">npm install socket.io --save-dev</span></h5><div style="box-sizing: border-box;"><hr style="box-sizing: content-box; border: 0px none; height: 2px; margin: 16px 0px; padding: 0px; background-color: rgb(231, 231, 231); overflow: hidden;"/></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">Socket.IO</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.8em; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://github.com/Wscats/node-tutorial/issues/7" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">socket.io</a></div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0.8em 0px 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><a href="https://www.npmjs.com/package/socket.io" style="box-sizing: border-box; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">npm 参考文档</a></div></blockquote><div style="box-sizing: border-box;"><hr style="box-sizing: content-box; border: 0px none; height: 2px; margin: 16px 0px; padding: 0px; background-color: rgb(231, 231, 231); overflow: hidden;"/></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">socket.io一部分在node的express下设置</span></div></div></li><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">另一部部分浏览器页面下加载</span><span style="box-sizing: border-box; font-weight: bold; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">socket.io.client.js</span></div></div></li></ul><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">在express使用socket</span></h4><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">app</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'express'</span><span style="box-sizing: border-box;">)();</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">server</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'http'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">createServer</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">app</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">io</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'socket.io'</span><span style="box-sizing: border-box;">)(</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">server</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">io</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'connection'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span> <span style="box-sizing: border-box; color: rgb(170, 85, 0);">/* … */</span> <span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">server</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">listen</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">3000</span><span style="box-sizing: border-box;">);</span></div></div><h4 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.25em; position: relative; font-weight: bold; line-height: 1.4; cursor: text;">方法</span></h4><table style="box-sizing: border-box; border-spacing: 0px; text-align: left; overflow: auto; break-inside: auto; white-space: pre-wrap; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 400px;"></col><col style="width: 400px;"></col></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 457px; min-height: 10px;">接口</span></div></td><td style="box-sizing: border-box; font-weight: bold; text-align: left; width: 400px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 288px; min-height: 10px;">描述</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px;"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 457px; min-height: 10px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">socket.on()</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 288px; min-height: 10px;">发送信息</span></div></td></tr><tr style="box-sizing: border-box; break-inside: avoid; break-after: auto; padding: 0px; background-color: rgb(248, 248, 248);"><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 457px; min-height: 10px; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px;">socket.emit()</span></div></td><td style="box-sizing: border-box; text-align: left; border: 1px solid rgb(223, 226, 229); width: 400px; padding: 8px;"><div><span style="box-sizing: border-box; display: inline-block; min-width: 4ch; width: 288px; min-height: 10px;">接受信息</span></div></td></tr></tbody></table><div style="box-sizing: border-box;"><hr style="box-sizing: content-box; border: 0px none; height: 2px; margin: 16px 0px; padding: 0px; background-color: rgb(231, 231, 231); overflow: hidden;"/></div><h2 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.75em; position: relative; font-weight: bold; line-height: 1.225; cursor: text; border-bottom: 1px solid rgb(238, 238, 238);">具体操作案例</span></h2><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">逻辑：前端发送，后端接收。后端再把接收到的数据发送到前端</span></div></blockquote><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">前端</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">要下载客户端</span><a href="https://github.com/socketio/socket.io-client" style="box-sizing: border-box; font-weight: bold; cursor: pointer; color: rgb(65, 131, 196); -webkit-user-drag: none;">socket.io.js</a><span style="box-sizing: border-box; font-weight: bold;">文件，在页面中引入</span></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(85, 85, 85);">&lt;!DOCTYPE html&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">html</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">lang</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;en&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">head</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">body</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">textarea</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">name</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;massage&quot;</span> <span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">textarea</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">input</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;button&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">value</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;发送&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;send&quot;</span> <span style="box-sizing: border-box; color: rgb(17, 119, 0);">/&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">ul</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">id</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;massaegList&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">ul</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;text/javascript&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">src</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;../javascripts/socket.io.js&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;text/javascript&quot;</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">src</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;../javascripts/jquery-3.2.1.js&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span> <span style="box-sizing: border-box; color: rgb(0, 0, 204);">type</span><span style="box-sizing: border-box;">=</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;text/javascript&quot;</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">socket</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">io</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'<a href="http://localhost:3001/">http://localhost:3001</a>'</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'connect'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">() {});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'event'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">data</span><span style="box-sizing: border-box;">) {});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'disconnect'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">() {});</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//发送</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;#send&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">click</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">emit</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;sendMsg&quot;</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;#massage&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">val</span><span style="box-sizing: border-box;">());</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//接收</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'getMsg'</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">data</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">$</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">&quot;#massaegList&quot;</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">append</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(255, 85, 0);">`&lt;li&gt;${</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data</span><span style="box-sizing: border-box; color: rgb(255, 85, 0);">}&lt;/li&gt;`</span><span style="box-sizing: border-box;">)</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">script</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">body</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div><div><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&lt;/</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">html</span><span style="box-sizing: border-box; color: rgb(17, 119, 0);">&gt;</span></div></div><h3 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.43; cursor: text;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1.5em; position: relative; font-weight: bold; line-height: 1.43; cursor: text;">后端</span></h3><blockquote style="box-sizing: border-box; margin: 0.8em 0px; border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119);"><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">在express中使用</span></div></blockquote><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 将socket接口封装再导出到app.js文件中，就可以方便引用</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">socket</span><span style="box-sizing: border-box;">(){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// In conjunction with Express结合express使用socket</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">app</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'express'</span><span style="box-sizing: border-box;">)();</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">server</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'http'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">createServer</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">app</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(119, 0, 136);">var</span> <span style="box-sizing: border-box; color: rgb(0, 0, 255);">io</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'socket.io'</span><span style="box-sizing: border-box;">)(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">server</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">io</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'connection'</span><span style="box-sizing: border-box;">,</span> <span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">socket</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//socket信息的逻辑编写在这里</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//接收</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">on</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'sendMsg'</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(119, 0, 136);">function</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 0, 255);">data</span><span style="box-sizing: border-box;">){</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">console</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">log</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//发送</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">socket</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">emit</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'getMsg'</span><span style="box-sizing: border-box;">,</span><span style="box-sizing: border-box; color: rgb(0, 85, 170);">data</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box;">})</span></div><div><span style="box-sizing: border-box;">});</span></div><div><span style="box-sizing: border-box; color: rgb(0, 85, 170);">server</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">listen</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(17, 102, 68);">3001</span><span style="box-sizing: border-box;">);</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//【注意】端口号不可以与其他冲突，如express的端口号为3000，因此这里不要再应用3000端口号</span></div><div><span style="box-sizing: border-box;">}</span></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">// 将接口导出(到app.js)</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">module</span><span style="box-sizing: border-box;">.</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">exports</span> <span style="box-sizing: border-box; color: rgb(152, 26, 26);">=</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span></div><div><span style="box-sizing: border-box;">}</span></div></div><ul style="box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative;"><li style="box-sizing: border-box; margin: 0px; position: relative;"><div><p style="box-sizing: border-box; orphans: 4; -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; margin: 0px 0px 0.5rem; position: relative; width: inherit;"></p><div style="box-sizing: border-box;"><span style="box-sizing: border-box;">app.js中导入socket接口如下：</span></div></div></li></ul><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; position: relative !important;"><div><br/></div><div><span style="box-sizing: border-box; color: rgb(170, 85, 0);">//socket路由</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0);">require</span><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box; color: rgb(170, 17, 17);">'./routes/socket.js'</span><span style="box-sizing: border-box;">).</span><span style="box-sizing: border-box; color: rgb(0, 0, 0);">socket</span><span style="box-sizing: border-box;">();</span></div></div><h1 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 2.25em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238);"><br/></h1><br/></div></span>
</div></body></html> 