<html>
<head>
  <title>05.节点的复制、删除、判断方法</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307425 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="847"/>
<h1>05.节点的复制、删除、判断方法</h1>

<div>
<span><div><div><font style="font-size: 14pt;"><b>复制:</b></font></div><div>  <font style="font-size: 12pt;">  当前节点.cloneNode(boolean)  复制节点，为true是深复制（把节点里的内容也复制了）。返回值为复制后的新节点</font></div><div><font style="font-size: 14pt;"><b>删除：</b></font></div><div>   <font style="font-size: 12pt;"> 父节点.removeChild(ele)  删除（并返回）当前节点parent的指定子节点ele。</font></div><div><font style="font-size: 14pt;"><b>判断：</b></font></div><div>  <font style="font-size: 14pt;">  </font><font style="font-size: 12pt;">父节点.hasChildNodes() 判断当前节点是否拥有子节点,返回布尔值</font></div><div><font style="font-size: 12pt;"><br/></font></div><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; margin-top: 1rem; margin-bottom: 1rem; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14pt;">案例：表格删除、复制表格行</font></span></h5><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; position: relative !important;"><div style="color: rgb(51, 51, 51);"><br style="font-size: 12pt;"/></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">*添加行号</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">*添加删除按钮</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">*删除当前行（一定要书写在生成表格后）</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">*获取所有按钮</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">*分别给所有按钮绑定事件处理函数</span></div><div><span style="box-sizing: border-box; font-size: 12pt;"><font color="#FF0000">for(var i=0;i&lt;btnDels.length;i++){</font></span></div><div><font color="#FF0000"><span style="box-sizing: border-box; font-size: 12pt;">btnDels[i].onclick = function(){</span></font></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">//console.log(i)//演示：不管点击哪个按钮，最终都会得到10（变量查找规则）</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">//利用当前对象this，删除当前行tr、</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">}</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">//*添加复制功能，复制行</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">btnCopies[i].onclick = function(){</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">// 获取当前行</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">var currentTr = this.parentNode.parentNode;</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">// 复制tr</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">var copyTr = currentTr.cloneNode(true);</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">// ！！！问题：复制的tr没有事件，为什么，怎么解决？</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">table.getElementsByTagName('tbody')[0].appendChild(copyTr);</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">}</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;">}</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt;"><br/></span></div></div><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">演示：</span></h5><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; color: rgb(51, 51, 51); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; position: relative !important;"><div><br style="font-size: 12pt;"/></div><div><span style="box-sizing: border-box; font-size: 12pt;">1.判断父节点是否存在子节点</span></div><div><span style="box-sizing: border-box; font-size: 12pt;">2.对已存在的元素进行插入操作的后果</span></div></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; color: rgb(51, 51, 51);"><font style="font-size: 14pt;">具体代码：</font></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;style type=&quot;text/css&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        table{width:100%;border:1px solid #ccc;border-spacing:0;border-collapse: collapse;}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        table td{border:1px solid #ccc;}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;/style&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/head&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;body&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    行：&lt;input type=&quot;number&quot; id=&quot;row&quot; /&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    列：&lt;input type=&quot;number&quot; id=&quot;col&quot; /&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;input type=&quot;button&quot; value=&quot;生成表格&quot; id=&quot;btn&quot; /&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;div id=&quot;output&quot;&gt;&lt;/div&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;script type=&quot;text/javascript&quot;&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        var row = document.getElementById(&quot;row&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        var col = document.getElementById(&quot;col&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        var btn = document.getElementById(&quot;btn&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        var output = document.getElementById(&quot;output&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        btn.onclick = function(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var _row = row.value;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var _col = col.value;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var table = setTable(_row,_col);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            output.innerHTML = &quot;&quot;;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            output.appendChild(table);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            // 获取删除按钮、复制按钮</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            // 给所有删除按钮都添加点击事件，删除当前行</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var delBtn = document.getElementsByClassName(&quot;delBtn&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var cloneBtn = document.getElementsByClassName(&quot;cloneBtn&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            for(var i=0;i&lt;delBtn.length;i++){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                delBtn[i].onclick = function(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    // this当前执行的对象</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    var currentTr = this.parentElement.parentElement;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    currentTr.parentElement.removeChild(currentTr);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                cloneBtn[i].onclick = function(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    //拿到当前行</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    var currentTr = this.parentElement.parentElement;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    // 复制当前行</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    var newTr = currentTr.cloneNode(true);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    // 插入到tbody里面</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    currentTr.parentElement.appendChild(newTr);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">       </span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        function setTable(r,c){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var table = document.createElement(&quot;table&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            var tbody = document.createElement(&quot;tbody&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            for(var i=0;i&lt;r;i++){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                var tr = document.createElement(&quot;tr&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                // (1)第一列为索引列</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                var td = document.createElement(&quot;td&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                td.innerHTML = i+1;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                tr.appendChild(td);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                // =======</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                for(var j=0;j&lt;c-2;j++){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    var td = document.createElement(&quot;td&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    td.innerHTML = &quot;单元格&quot;+i+j;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                    tr.appendChild(td);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                //(2)最后一列为删除列</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                var td = document.createElement(&quot;td&quot;);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                td.innerHTML = '&lt;input type=&quot;button&quot; value=&quot;删除&quot; class=&quot;delBtn&quot;&gt;&lt;input type=&quot;button&quot; value=&quot;复制&quot; class=&quot;cloneBtn&quot; &gt;';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                tr.appendChild(td);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                // ============</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">                tbody.appendChild(tr);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            table.appendChild(tbody);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">            return table;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    &lt;/script&gt;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">&lt;/body&gt;</span></div></div><div><br/></div></div></span>
</div></body></html> 