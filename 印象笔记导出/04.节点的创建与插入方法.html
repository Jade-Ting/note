<html>
<head>
  <title>04.节点的创建与插入方法</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307425 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="845"/>
<h1>04.节点的创建与插入方法</h1>

<div>
<span><div><div><font style="font-size: 14pt;">创建：</font></div><div>   <font style="font-size: 12pt;"> document.createElement() 创建一个元素节点</font></div><div><font style="font-size: 12pt;">    document.createTextNode() 创建一个文本节点(了解)</font></div><div><font style="font-size: 12pt;">    document.createAttribute() 创建一个属性节点（了解）</font></div><div><font style="font-size: 14pt;">插入：</font>        </div><div>   <font style="font-size: 12pt;"> parent.appendChild()  向节点的子节点列表的结尾添加新的子节点</font></div><div><font style="font-size: 12pt;">    parent.insertBefore(new,node)  在指定的子节点node前插入新的子节点new。</font></div><div><font style="font-size: 12pt;">    ele.setAttributeNode(attrNode) 在指定元素中插入一个属性节点（了解）</font></div><div><font style="font-size: 12pt; color: rgb(255, 70, 53);"><span>    注：</span>以上parent表示父级元素，ele表示元素</font></div><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14pt;">演示：利用创建节点方法，生成三种节点，并往元素节点插入内容及属性</font></span></h5><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; position: relative !important;"><div style="color: rgb(51, 51, 51);"><br style="font-size: 12pt; color: rgb(255, 70, 53);"/></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">1.创建元素节点</span></div><div><span style="box-sizing: border-box; font-size: 12pt;"><span style="color: rgb(255, 70, 53);">    </span>var h3 = document.createElement(&quot;h3&quot;);</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">2.创建文本节点，并往h3元素节点插入文本节点</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);"><span>    </span>var txt = document.createTextNode(&quot;啦啦啦&quot;);</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);"><span>    </span>h3.appendChild(txt);</span></div><div><span style="box-sizing: border-box; font-size: 12pt;"><span style="color: rgb(255, 70, 53);">    一般不用上面的方法，</span>常用方法为 =====&gt; h3.innerHTML = &quot;啦啦啦&quot;；</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">3.创建属性节点，并往h3元素节点插入属性节点</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);"><span>    </span>var title = document.createAttribute(&quot;title&quot;);</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);"><span>    </span>title.nodeValue = 'xxx';</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);"><span>    </span>h3.setAttributeNode(title)；</span></div><div><span style="box-sizing: border-box; font-size: 12pt;"><span style="color: rgb(255, 70, 53);">    </span>常用方法 =====&gt; h3.title = &quot;xxx&quot;</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">4.将元素节点插入body里面</span></div><div><span style="box-sizing: border-box; font-size: 12pt;"><span style="color: rgb(255, 70, 53);">    </span>document.body.appendChild(h1);</span></div></div><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14pt;">演示：insertBefore(),往子节点前面插入一个新节点</font></span></h5><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; color: rgb(51, 51, 51); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; position: relative !important;"><div><br style="font-size: 12pt; color: rgb(255, 70, 53);"/></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">var h2 = document.createElement('h2');</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">h2.innerHTML = '哈哈哈';</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">document.body.insertBefore(h2,h3);</span></div></div><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; position: relative; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14pt;">案例:生成表格</font></span></h5><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; color: rgb(51, 51, 51); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; position: relative !important;"><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//1.获取文本框、按钮、及输出元素</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.封装表格函数（保证单一原则,即一个函数只做一件事）</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">function createTable(r,c){</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.1 创建table&gt;tbody&gt;tr&gt;td,记得插入对应的父元素内</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.2 将table返回出去</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">}</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//3.点击按钮时</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.1 获取行列值</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.2 执行生成表格函数</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.3 将表格插入输出元素</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">//2.4 注意事项：每次插入前，记得清空上一次插入的内容</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">output.innerHTML = '';</span></div><div><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">output.appendChild(table);</span></div></div><h5 style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; break-inside: avoid; break-after: avoid-page; orphans: 2; font-size: 1em; position: relative; font-weight: bold; line-height: 1.4; cursor: text; color: rgb(51, 51, 51); font-family: &quot;Open Sans&quot;, &quot;Clear Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">案例：自动应答机器人</span></h5><div style="box-sizing: border-box; overflow: visible; font-family: Consolas, &quot;Liberation Mono&quot;, Courier, monospace; font-size: 0.9em; white-space: normal; text-align: left; break-inside: avoid; background-color: rgb(248, 248, 248); border: 1px solid rgb(223, 226, 229); border-radius: 3px; padding: 8px 1em 6px; margin-bottom: 15px; margin-top: 15px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; position: relative !important;"><div style="color: rgb(51, 51, 51);"><br style="font-size: 12pt; color: rgb(255, 70, 53);"/></div><div><span style="color: rgb(255, 70, 53); box-sizing: border-box; font-size: 12pt;">//</span> <span style="box-sizing: border-box; font-size: 12pt;">1.获取输出元素ul、输入框及按钮</span></div><div><span style="box-sizing: border-box; font-size: 12pt;">// 3.设置应答消息，用数组方式存放</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">var q = '你好,在吗,约吗,十年了还约吗'.split(',');</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">var a = '他好我也好,不是本人,叔叔在哪约,滚'.split(',');</span></div><div><span style="color: rgb(255, 70, 53); box-sizing: border-box; font-size: 12pt;">//</span> <span style="box-sizing: border-box; font-size: 12pt;">2.点击按钮，发送信息（.active）</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">btn.onclick = function(){</span></div><div><span style="color: rgb(255, 70, 53); box-sizing: border-box; font-size: 12pt;">//</span><span style="box-sizing: border-box; font-size: 12pt;">2.1 发送信息（即在ul内插入li，并设置类名）：</span></div><div><span style="box-sizing: border-box; font-size: 12pt;">//2.2 发送自动应答信息（设置延迟n秒，setTimeout）</span></div><div><span style="color: rgb(255, 70, 53); box-sizing: border-box; font-size: 12pt;">//</span> <span style="box-sizing: border-box; font-size: 12pt;">注意：利用发送信息在q数组的索引，获取a数组中自动回复的内容</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">var idx = q.indexOf(_msg);</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">if(idx &gt;= 0){</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">aLi.innerHTML = a[idx];</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">}else{</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">aLi.innerHTML = '你说什么？风太大我听不到';</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">}</span></div><div><span style="color: rgb(255, 70, 53); box-sizing: border-box; font-size: 12pt;">//</span><span style="box-sizing: border-box; font-size: 12pt;">2.3 清空内容，自动聚焦</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">msg.value = '';</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">msg.focus();</span></div><div style="color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font-size: 12pt; color: rgb(255, 70, 53);">}</span></div></div><div><br style="font-size: 12pt; color: rgb(255, 70, 53);"/></div></div></span>
</div></body></html> 